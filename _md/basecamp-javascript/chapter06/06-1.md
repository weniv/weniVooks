---
chapter: 조금 더 깊이 들여다보기
title: this
date: 2024-04-03
---

# 1. this 키워드 이해하기

JavaScript에서 this 키워드는 매우 중요하지만, 처음에는 이해하기 어려울 수 있습니다. this는 함수가 어떻게 호출되었는지에 따라 다르게 동작하기 때문입니다.

보통 정의를 내리고 예제를 보아야 하지만 this를 '나 자신', '나 자신을 호출한 객체' 또는 '이것' 이라고 정의 내리긴 어렵습니다. 앞서 말씀드린 것처럼 어떻게 호출되었는지에 따라 다르게 동작하기 때문입니다.

아래 예제에서 this는 위의 경우에는 window, 아래의 경우에는 myObj입니다. 분명 같은 기능을 하고 있는데 말이죠.

```javascript-exec
function a() {
  console.log(this);
}
a();
```

```javascript-exec
let obj = {
  value: 100,
  f: function () {
    console.log(this);
  },
};

obj.f();
```

다양한 상황을 통해 this가 가리키는 값을 살펴보겠습니다. 호출되는 상황에 따라 this가 어떻게 동작하는지 이해해주세요.

## 1. 전역 범위

```javascript-exec
console.log(this); // 브라우저에서는 window 객체
```

전역 범위, 보통 전역 컨텍스트라고 얘기합니다. 전역 컨텍스트에서 `this`는 전역 객체를 가리킵니다. 브라우저에서는 `window` 객체가 전역 객체이며 Node.js 환경에서는 `global` 객체가 전역 객체입니다.

## 2. 함수 범위

함수 내부에서 `this`의 값은 함수를 호출한 방식에 따라 결정됩니다.

### 2.1 일반 함수 호출

일반 함수 호출에서 `this`는 전역 객체를 나타냅니다.

```javascript-exec
function f() {
  console.log(this);
}

f(); // Window 객체 (브라우저에서)
```

### 2.2 화살표 함수

화살표 함수에서 `this`는 함수가 정의된 위치의 컨텍스트를 유지합니다. 이를 "lexical this"라고 합니다.

```javascript-exec
const obj = {
  f: function() {
    const ff = () => {
      console.log(this);
    };
    ff();
    
    const fff = function() {
      console.log(this);
    };
    fff();
  }
};

obj.f();
// f (화살표 함수 ff에서의 this)
// Window 객체 (일반 함수 fff에서의 this)
```

### 2.3 메서드 호출

객체의 메서드로 호출된 함수에서 `this`는 해당 객체를 나타냅니다.

```javascript-exec
const obj = {
  f: function() {
    console.log(this);
  }
};

obj.f(); // obj
```

### 2.4 생성자 함수 호출

`new` 키워드를 사용하여 생성자 함수를 호출하면, `this`는 새로 생성된 객체를 나타냅니다.

```javascript-exec
function Person(name) {
  this.name = name;
  console.log(this);
}

const person1 = new Person("licat"); // Person { name: "licat" }
```

## 3. 이벤트 헨들러

이벤트 핸들러 내에서 this는 이벤트가 발생한 DOM 요소를 가리킵니다.

```javascript-exec
<button id="btn">hello world!</button>

<script>
const button = document.getElementById('btn');
button.addEventListener('click', function() {
  console.log(this); // <button id="btn">Click me!</button>
});
</script>
```
