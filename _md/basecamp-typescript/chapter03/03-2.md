---
chapter: 타입스크립트 추가 문법
title: 고급 타입
date: 2024-11-14
---

# 1. 고급 타입

## 1.1 Enum 타입

상수 집합을 정의할 때 사용하는 타입입니다. 다른 언어에서도 종종 사용되며, 주로 숫자나 문자열 값으로 이루어진 집합을 정의할 때 사용합니다.

### 1.1.1 숫자형 Enum
```tsx
enum Direction {
  Up = 1,
  Down,  // 2
  Left,  // 3
  Right  // 4
}

console.log(Direction.Up); // 1
```

### 1.1.2 문자열 Enum
```tsx
enum Status {
  Active = "ACTIVE",
  Inactive = "INACTIVE",
  Pending = "PENDING"
}

console.log(Status.Active); // ACTIVE
```

## 1.2 유틸리티 타입

TypeScript에서 제공하는 유용한 타입 변환 도구들입니다.

### 1.2.1 Partial

모든 속성을 선택적으로 만듭니다.

```tsx
interface Todo {
  title: string;
  description: string;
}

// 모든 필드가 선택적인 타입이 됨
type PartialTodo = Partial<Todo>;

const todo: PartialTodo = {
  title: "할 일"
};

// 모든 필드가 선택적이므로 빈 객체도 가능
const emptyTodo: PartialTodo = {};

console.log(todo);
console.log(emptyTodo);
```

### 1.2.2 Pick

특정 속성만 선택합니다.

```tsx
interface Todo {
  title: string;
  description: string;
  completed: boolean;
}

// title과 completed만 가지는 타입
type TodoPreview = Pick<Todo, "title" | "completed">;

const todo: TodoPreview = {
  title: "할 일",
  completed: false
};

console.log(todo);
```

### 1.2.3 Omit

특정 속성을 제외합니다.

```tsx
interface Todo {
  title: string;
  description: string;
  completed: boolean;
}

type TodoWithoutDescription = Omit<Todo, "description">;

const todo: TodoWithoutDescription = {
  title: "할 일",
  completed: false
};

console.log(todo);
```

## 1.3 unknown 타입

`unknown`은 타입 안전성을 강화한 `any` 타입입니다. 타입을 확정하기 전까지는 값을 사용할 수 없습니다.

```tsx
let value: unknown = 4;
value = "hello";

// 타입 검사 없이 사용 불가
// console.log(value.length); // 에러!

// 타입 검사 후 사용 가능
if (typeof value === "string") {
    console.log(value.length); // 정상 동작
}
```


## 1.4 맵드 타입

맵드 타입(Mapped Types)은 기존 타입의 모든 속성을 새로운 규칙에 따라 변환하여 새로운 타입을 만드는 방법입니다. 마치 배열의 map 함수처럼, 타입의 각 속성을 다른 형태로 변환할 수 있습니다.

### 1.4.1 기본 개념

```typescript
// 기본 인터페이스
interface User {
    name: string;    // 필수
    age: number;     // 필수
    email: string;   // 필수
}

// 모든 속성을 선택적(optional)으로 만드는 맵드 타입
type Optional<T> = {
    [P in keyof T]?: T[P];
};

// 사용 예시
type OptionalUser = Optional<User>;

// OptionalUser는 다음과 같은 형태가 됩니다:
// {
//     name?: string;    // 선택적
//     age?: number;     // 선택적
//     email?: string;   // 선택적
// }

// 실제 사용
const user1: User = {
    name: "licat",     // 모든 속성이 필수
    age: 10,
    email: "kim@mail.com"
};

const user2: OptionalUser = {
    name: "mura"      // 일부 속성만 사용 가능
};  // OK! - age와 email이 선택적이므로 생략 가능
```

### 1.4.2 자주 사용하는 맵드 타입 예시

아래와 같이 사용하면 접두사를 추가하는 맵드 타입을 만들 수 있습니다.

```typescript
type Notice = {
    title: string;
    content: string;
    date: string;
}

type TestNotice<T> = {
    [P in keyof T as `hello${string & P}`]: string;
};

const testNotice: TestNotice<Notice> = {
    hellotitle: '타입스크립트',
    hellocontent: '여긴 어디죠? 나는 누구인가요?',
    hellodate: '2024-13-30'
}

console.log(testNotice);
```

모든 타입을 필수 타입으로 변경하는 것도 가능합니다.

```ts
type OptionalNotice = {
    title?: string;    // 선택적
    content?: string;  // 선택적
    date: string;      // 필수
}

type RequiredTestNotice<T> = {
    [P in keyof T as `hello${string & P}`]-?: string;
};

const testNotice: RequiredTestNotice<OptionalNotice> = {
    hellotitle: '타입스크립트',
    hellocontent: '여긴 어디죠? 나는 누구인가요?',
    hellodate: '2024-13-30'
    // 모든 필드가 필수가 됩니다.
    // hellotitle 생략 시 에러
    // hellocontent 생략 시 에러
    // hellodate 생략 시 에러
}

console.log(testNotice);
```

# 2. 연습문제

1. 아래 인터페이스를 기반으로 유틸리티 타입을 활용해보세요.
```tsx
interface Product {
  id: number;
  name: string;
  price: number;
  description: string;
  category: string;
}

// 1. 제품 생성 시 필요한 타입 (id 제외)
// 2. 제품 수정 시 필요한 타입 (모든 필드 선택적)
// 3. 제품 목록 표시용 타입 (id, name, price만 포함)
```

2. 다음과 같은 맵드 타입을 구현해보세요.
   - 모든 속성을 읽기 전용으로 만드는 `Readonly<T>` 구현
   - 모든 속성을 필수로 만드는 `Required<T>` 구현

# 3. 연습문제 정답

1. Product 인터페이스 기반 유틸리티 타입

```typescript
interface Product {
    id: number;
    name: string;
    price: number;
    description: string;
    category: string;
}

// 1) 제품 생성 시 필요한 타입 (id 제외)
type CreateProductDTO = Omit<Product, "id">;

// 2) 제품 수정 시 필요한 타입 (모든 필드 선택적)
type UpdateProductDTO = Partial<Product>;

// 3) 제품 목록 표시용 타입 (id, name, price만 포함)
type ProductListItem = Pick<Product, "id" | "name" | "price">;

// 사용 예시
const newProduct: CreateProductDTO = {
    name: "노트북",
    price: 1000000,
    description: "최신 노트북",
    category: "전자기기"
};

const updateProduct: UpdateProductDTO = {
    price: 1200000,
    description: "최신 고성능 노트북"
};

const listItem: ProductListItem = {
    id: 1,
    name: "노트북",
    price: 1000000
};
```

2. 맵드 타입 구현

```typescript
// Readonly<T> 구현
type MyReadonly<T> = {
    readonly [P in keyof T]: T[P];
};

// Required<T> 구현
type MyRequired<T> = {
    [P in keyof T]-?: T[P];
};

// 사용 예시
interface User {
    name?: string;
    age?: number;
}

type ReadonlyUser = MyReadonly<User>;  // 모든 속성이 readonly
type RequiredUser = MyRequired<User>;   // 모든 속성이 필수

// 타입 검증
const readonlyUser: ReadonlyUser = {
    name: "John",
    age: 30
};
// readonlyUser.name = "Jane"; // 에러: readonly 속성이므로 수정 불가

const requiredUser: RequiredUser = {
    name: "John",
    age: 30
    // 모든 속성을 반드시 지정해야 함
};
```