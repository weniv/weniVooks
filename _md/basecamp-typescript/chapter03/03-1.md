---
chapter: 타입스크립트 추가 문법
title: 고급 타입
date: 2024-11-14
---

# 1. 고급 타입

## 1.1 제네릭

제네릭을 사용하면 타입을 마치 함수의 파라미터처럼 사용할 수 있습니다.

### 1.1.1 제네릭 인터페이스

```tsx
interface ApiResponse<T> {
  status: number;
  data: T;
  error?: string;
}

interface UserData {
  id: number;
  name: string;
}

const response: ApiResponse<UserData> = {
  status: 200,
  data: {
    id: 1,
    name: "홍길동"
  }
};
```

### 1.1.2 제네릭 함수

```tsx
function getValue<T>(value: T): T {
  return value;
}

const numberValue = getValue<number>(123);  // number 타입
const stringValue = getValue<string>("hello");  // string 타입
```

## 1.2 Enum

상수 집합을 정의할 때 사용하는 타입입니다.

### 1.2.1 숫자형 Enum
```tsx
enum Direction {
  Up = 1,
  Down,  // 2
  Left,  // 3
  Right  // 4
}
```

### 1.2.2 문자열 Enum
```tsx
enum Status {
  Active = "ACTIVE",
  Inactive = "INACTIVE",
  Pending = "PENDING"
}
```

## 1.3 유틸리티 타입

TypeScript에서 제공하는 유용한 타입 변환 도구들입니다.

### 1.3.1 Partial
모든 속성을 선택적으로 만듭니다.
```tsx
interface Todo {
  title: string;
  description: string;
}

// 모든 필드가 선택적인 타입이 됨
type PartialTodo = Partial<Todo>;
```

### 1.3.2 Pick
특정 속성만 선택합니다.
```tsx
interface Todo {
  title: string;
  description: string;
  completed: boolean;
}

// title과 completed만 가지는 타입
type TodoPreview = Pick<Todo, "title" | "completed">;
```

### 1.3.3 Omit
특정 속성을 제외합니다.
```tsx
type TodoWithoutDescription = Omit<Todo, "description">;
```

## 1.4 unknown 타입

`unknown`은 타입 안전성을 강화한 `any` 타입입니다. 타입을 확정하기 전까지는 값을 사용할 수 없습니다.

```tsx
let value: unknown = 4;
value = "hello";

// 타입 검사 없이 사용 불가
// console.log(value.length); // 에러!

// 타입 검사 후 사용 가능
if (typeof value === "string") {
    console.log(value.length); // 정상 동작
}
```

## 1.5 타입 가드

타입 가드를 사용하면 특정 스코프 내에서 타입을 보장할 수 있습니다.

### 1.5.1 typeof 타입 가드
```tsx
function processValue(value: string | number) {
    if (typeof value === "string") {
        return value.toUpperCase(); // string으로 타입 보장
    }
    return value.toFixed(2); // number로 타입 보장
}
```

### 1.5.2 instanceof 타입 가드
```tsx
class Dog {
    bark() { return "Woof!"; }
}

class Cat {
    meow() { return "Meow!"; }
}

function makeSound(animal: Dog | Cat) {
    if (animal instanceof Dog) {
        return animal.bark();
    }
    return animal.meow();
}
```

### 1.5.3 사용자 정의 타입 가드
```tsx
interface Fish {
    swim(): void;
}

interface Bird {
    fly(): void;
}

function isFish(pet: Fish | Bird): pet is Fish {
    return (pet as Fish).swim !== undefined;
}

function move(pet: Fish | Bird) {
    if (isFish(pet)) {
        pet.swim();
    } else {
        pet.fly();
    }
}
```

## 1.6. 맵드 타입

기존 타입을 기반으로 새로운 타입을 생성할 수 있습니다.

```tsx
type Optional<T> = {
    [P in keyof T]?: T[P];
};

interface User {
    name: string;
    age: number;
}

// 모든 속성이 선택적인 새로운 타입
type OptionalUser = Optional<User>;
```

# 2. 연습문제

1. 다음 요구사항에 맞는 제네릭 함수를 작성해보세요.
   - 배열을 입력받아 첫 번째 요소를 반환하는 함수
   - 배열이 비어있으면 undefined 반환
   - 모든 타입의 배열에 대해 동작해야 함

2. 아래 인터페이스를 기반으로 유틸리티 타입을 활용해보세요.
```tsx
interface Product {
  id: number;
  name: string;
  price: number;
  description: string;
  category: string;
}

// 1. 제품 생성 시 필요한 타입 (id 제외)
// 2. 제품 수정 시 필요한 타입 (모든 필드 선택적)
// 3. 제품 목록 표시용 타입 (id, name, price만 포함)
```

3. 다음과 같은 맵드 타입을 구현해보세요.
   - 모든 속성을 읽기 전용으로 만드는 `Readonly<T>` 구현
   - 모든 속성을 필수로 만드는 `Required<T>` 구현

4. 다음 코드에 타입 가드를 추가해보세요.
```tsx
interface Square {
    kind: "square";
    size: number;
}

interface Rectangle {
    kind: "rectangle";
    width: number;
    height: number;
}

interface Circle {
    kind: "circle";
    radius: number;
}

type Shape = Square | Rectangle | Circle;

// 도형의 면적을 계산하는 함수를 작성하세요.
function calculateArea(shape: Shape): number {
    // 여기에 구현
}
```

:::div{.callout}
💡 타입 가드와 맵드 타입은 TypeScript의 고급 기능이지만, 타입 안전성을 높이고 코드의 재사용성을 향상시키는 데 매우 유용합니다.
:::