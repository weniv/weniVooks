---
chapter: Form과 인증
title: django의 Form 시스템
date: 2024-08-06
---
django에서 폼(form)은 사용자가 제공하는 데이터를 안전하게 입력받고 자동으로 검사하는 도구입니다. 이 폼은 텍스트, 숫자, 이메일 등 다양한 유형의 데이터를 처리할 수 있는 여러 필드 타입을 제공합니다. 결과적으로 장고 폼은 복잡한 데이터 처리 로직을 단순화하여 웹 개발을 더욱 쉽고 효율적으로 만듭니다. 직접 장고 폼을 만들어보면서 실습해 봅시다.

# 1. 개발 환경 설정
아래 코드를 복사해서, 작업할 폴더의 터미널에 `shift + insert`합니다. 
```bash
mkdir mysite
cd mysite
python -m venv venv
.\venv\Scripts\activate
pip install django
pip install pillow
pip freeze > requirements.txt
django-admin startproject tutorialdjango .
python manage.py migrate
python manage.py startapp blog
```
`mysite` 폴더를 생성하고, 가상환경 설치, `django`,`pillow` 라이브러리 설치, blog앱 생성까지 완료되었습니다.
`pip freeze > requirements.txt`는 `requirements`파일을 만들어 줍니다.
`requirements`파일은 가상환경에 설치한 라이브러리와 그 버전을 모두 가지고 있습니다.
나중에 이 `requirements`파일로 다른 가상환경에 설치 할 수도 있습니다.

:::div{.callout}
아래는 실제 사용되는 requirements파일입니다.
만약 새로운 가상환경에서 프로젝트를 시작할 때 아래와 같이 설정해야 할 라이브러리가 너무 많으면 관리하기가 어려워집니다. 하지만 requirements 파일을 사용하면 필요한 모든 라이브러리를 한 번에 쉽게 설치할 수 있어서 매우 편리합니다. 또 requirements 파일은 팀 프로젝트에서 특히 유용합니다. 모든 팀원이 이 파일을 통해 동일한 개발 환경을 쉽게 만들 수 있어서 "내 컴퓨터에서만 작동해요"와 같은 문제를 줄일 수 있습니다.
```
filelock==3.3.1
gdown==4.2.0
h5py==3.3.0
joblib==1.1.0
kaldiio==2.17.2
librosa==0.8.1
matplotlib==3.3.4
numpy==1.21.2
PyYAML==6.0
scikit_learn==1.0.1
scipy==1.7.1
six==1.16.0
torch==1.10.0
tqdm==4.62.3
```
`pip install -r requirements.txt` 명령어로 설치 할 수 있습니다.
:::

# 2. 설정 파일 수정
`tutorialdjango/settings.py` 파일을 열고 `ALLOWED_HOSTS`, `INSTALLED_APPS`를 수정하고, static파일과 media파일을 사용할 수 있게 합니다.

```python
#tutorialdjango > settings.py
ALLOWED_HOSTS = ["*"]

INSTALLED_APPS = [
    ...
    "blog",
]

STATIC_URL = "static/"
STATICFILES_DIRS = [BASE_DIR / "static"]

MEDIA_URL = "/media/"
MEDIA_ROOT = BASE_DIR / "media"
```
아래 명령어를 이용해서 static, media 폴더 생성
```
mkdir static
mkdir media
```
# 3. URL, view, template

- 앱이름: blog 

| URL | views 함수이름 | html 파일이름 | 비고 |
|-----|---------------|---------------|------|
| blog/ | blog_list | blog_list.html | 블로그 글 목록 | 
| 'blog/<int:pk>/' | blog_detail | blog_detail.html | 블로그 상세 글 읽기 |
| 'blog/create/' | blog_create | blog_create.html | 블로그 글 작성 |

1. `tutorialdjango/urls.py` 파일을 다음과 같이 수정합니다.
```python
#tutorialdjango > urls.py
from django.contrib import admin
from django.urls import path, include
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = [
    path("admin/", admin.site.urls),
    path("blog/", include("blog.urls")),
]

urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)

```
2. blog 앱에 blog/urls.py 파일을 생성하고 다음 내용을 추가합니다.
```python
# blog > urls.py
from django.urls import path
from . import views

urlpatterns = [
    path("", views.blog_list, name="blog_list"),
    path("<int:pk>/", views.blog_detail, name="blog_detail"),
    path("create/", views.blog_create, name="blog_create"),
]
```
3. views.py
```python
from django.shortcuts import render
from .models import Post


def blog_list(request):
    posts = Post.objects.all()
    context = {"object_list": posts}
    return render(request, "blog/blog_list.html", context)


def blog_detail(request, pk):
    post = Post.objects.get(pk=pk)
    context = {"object": post}
    return render(request, "blog/blog_detail.html", context)


def blog_create(request):
    return render(request, "blog/blog_create.html")
```
4. blog앱 안에 templates > blog 폴더를 생성해서 아래와 같은 파일을 만들어 줍니다.
```
blog > templates > blog > blog_list.html
blog > templates > blog > blog_detail.html
blog > templates > blog > blog_create.html
```

:::div{.callout}
**명령어로 파일 생성하는 방법**     
`templates > blog` 폴더에서 아래 명령어로 파일 생성 가능합니다.
1. **window**인 경우
- cmd
```
echo.>blog_list.html
echo.>blog_detail.html
echo.>blog_create.html
```
- powershell
```shell
New-Item -Path . -Name "blog_list.html" -ItemType "file" -Value ""
New-Item -Path . -Name "blog_detail.html" -ItemType "file" -Value ""
New-Item -Path . -Name "blog_create.html" -ItemType "file" -Value "
```
2. **맥북이나 리눅스 계열 노트북, git bash**인 경우
```bash
touch blog_list.html blog_detail.html blog_create.html
```
:::