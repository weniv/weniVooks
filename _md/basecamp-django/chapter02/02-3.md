---
chapter: URL처리와 템플릿 태그
title: URL
date: 2024-07-10
---
# 1. URL 패턴의 기본 개념

웹 애플리케이션을 개발할 때, URL은 사용자가 웹사이트에 접근할 수 있게 해주는 주소입니다. Django에서 URL 패턴은 이러한 주소를 정의하고 관리하는 방법을 제공합니다. URL 패턴을 이해하기 위해, 우리 집 주소를 예로 들어보겠습니다. 집 주소가 "제주특별자치도 제주시 동광로 137"라면, 웹사이트의 주소는 
`www.mywebsite.com/blog` 와 같은 형태가 됩니다.

Django에서 URL 패턴은 다음과 같이 정의됩니다.

```python
urlpatterns = [
    path('blog/', blog_list),
    path('blog/<int:pk>/', blog_details),
]
```

여기서 `blog/`는 웹사이트의 블로그 섹션을 나타내고, `<int:pk>/`는 블로그 글의 ID를 나타냅니다. 
집 주소에서 '제주시'가 큰 지역을, '동광로'가 특정 위치를 나타내는 것과 비슷합니다.
URL 패턴은 세 가지 주요 특징을 가지고 있습니다.

첫째, URL은 **여러 계층**으로 구성될 수 있습니다. 이는 전화번호가 국번, 지역번호 같이 구분되는 것과 비슷합니다. 
예를 들어, 'blog/'는 블로그 관련 모든 페이지의 시작점이 될 수 있어요. 마치 '02'로 시작하는 번호가 모두 서울의 전화번호인 것처럼요.
둘째, URL의 일부분은 **변할 수** 있습니다. 한 회사에서 각 부서의 번호가 앞부분은 같고 끝 번호만 다른 것과 비슷합니다.
'blog/1/'과 'blog/2/'는 같은 형태지만 숫자만 다르죠. 이렇게 하면 비슷한 여러 페이지를 쉽게 만들 수 있어요.
셋째, 각 URL은 특정 기능과 **연결**됩니다. 전화번호가 한 사람에게 연결되는 것과 같아요. URL을 입력하면 그에 해당하는 특정 웹 페이지나 기능이 실행됩니다.

# 2. urls.py 파일의 역할과 구조

Django 프로젝트에서 `urls.py` 파일은 URL 설정을 담당하는 중요한 파일입니다. 이 파일은 우리가 만들 웹사이트의 URL 구조를 정의하고, 각 URL을 적절한 뷰 함수와 연결하는 역할을 합니다. 뷰함수에 대한 이야기는 잠시 뒤로 미루고, 
우선 `urls.py` 파일을 휴대폰의 **전화번호부**라고 생각해봅시다. 모든 가족 구성원과 자주 연락하는 친구들의 주소가 이 전화번호부에 정리되어 있는 것처럼, 
웹사이트의 모든 페이지 주소가 `urls.py`에 정리되어 있습니다.

## 2.1 urls.py 파일의 기본 구조

```python
   from django.contrib import admin
   from django.urls import path
   from main.views import index, blog_list, blog_details, accounts_details

   urlpatterns = [
       path('admin/', admin.site.urls),
       path('', index),
       path('blog/', blog_list, name='blog_list'),
       path('blog/<int:pk>/', blog_details, name='blog_detail'),
       path('accounts/<str:username>/', accounts_details),
   ]
```
`from main.views import ...`는 각 부서의 담당 직원들을 불러오는 것입니다. 이 직원들(함수)은 `main/views.py`라는 파일에 정의되어 있습니다.

`urlpatterns` 리스트는 전화번호부입니다. 모든 전화번호와 그 담당자가 리스트에 적혀있습니다.

`path() 함수`는 전화번호와 담당 직원을 연결해 주는 역할을 합니다. 첫 번째 파라미터는 전화번호(URL)입니다. 위 코드에서는 `blog/`,`accounts/`같은 것들이고, 두 번째 파라미터는 담당 직원(뷰 함수)입니다. 위 코드에서는 `index`,`blog_list` 같은 것들입니다.
세번째 파라미터는 직원의 별명(name)을 붙여줍니다. 위 코드에서는 `name='blog_detail'`을 말합니다. 
템플릿에서 이 별칭을 이용해 이 URL에 접근할 수 있습니다.

정리하자면, 고객(웹 사이트 방문자)이 특정 번호(URL)로 전화(접속)했을 때, Django 는 어떤 직원(함수)이 응대해야 할지 바로 알 수 있게 됩니다. 
이렇게 `urls.py`는 웹사이트의 모든 "전화번호"를 관리하며, 각 주소에 맞는 적절한 "직원"을 연결해 주는 중요한 역할을 합니다.

## 2.2 URL 패턴 이름 지정

URL 패턴에 이름을 지정하면 템플릿이나 뷰에서 URL을 동적으로 생성할 때 편리합니다.

```python
path('blog/<int:pk>/', views.blog_detail, name='blog_detail')
```

위처럼 이름을 지정하면, 나중에 다음과 같이 URL을 부를 수 있습니다.

```python
from django.urls import reverse

url = reverse('blog_detail', args=[1])
```

## 2.3 앱별 URL 설정

큰 프로젝트의 경우, 각 앱마다 별도의 `urls.py` 파일을 만들고 메인 `urls.py`에서 이를 포함시키는 것이 좋습니다:

```python
# 메인 urls.py
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path("admin/", admin.site.urls),
    path("blog/", include("blog.urls")),
]

# blog/urls.py
from django.urls import path
from . import views

urlpatterns = [
    path("", views.blog_list, name="blog_list"),
    path("<int:pk>/", views.blog_detail, name="blog_detail"),
]
```
`urls.py` 파일을 잘 구성하면 웹사이트의 구조를 명확하게 정의할 수 있고, URL과 뷰 사이의 관계를 쉽게 이해할 수 있습니다. 
또한, 나중에 URL 구조를 변경해야 할 때도 한 곳에서 쉽게 관리할 수 있습니다.