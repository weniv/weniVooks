---
chapter: URL 처리와 템플릿 태그
title: View와 템플릿
date: 2024-07-11
---
# 1. View 소개

Django에서 View는 음식점의 주방장과 같습니다. 손님(사용자)이 메뉴(웹 페이지)를 주문하면, 주방장(View)은 그 주문을 받아 이해합니다.
그 다음 필요한 재료(데이터)를 냉장고(데이터베이스)에서 꺼내와 요리(데이터 처리)를 합니다.
완성된 요리(처리된 정보)를 예쁘게 플레이팅(HTML 페이지 생성)하여 웨이터(서버)를 통해 손님에게 제공합니다.
이처럼 View는 사용자의 요청부터 응답까지의 전체 과정을 관리하는 웹사이트의 '주방장' 역할을 수행합니다.

## 1.1 함수형 View와 클래스형 View

Django에서는 두 가지 유형의 View를 사용할 수 있습니다. 함수형 View와 클래스형 View입니다.

### 1.1.1 함수형 View
함수형 View는 가장 기본적이고 직관적인 형태의 View입니다. 이는 HTTP 요청 객체를 인자로 받아 HTTP 응답 객체를 반환하는 Python 함수입니다. 함수형 View는 간단한 로직부터 복잡한 처리까지 다양한 상황에 사용할 수 있습니다.

```python
from django.http import HttpResponse
from django.shortcuts import render

# 간단한 HttpResponse 사용
def hello_world(request):
    return HttpResponse("Hello, World!")

# render 함수를 사용한 템플릿 렌더링
def greet_user(request):
    context = {'username': 'John Doe'}
    return render(request, 'greetings.html', context)
```
함수형 View는 코드가 간결하고 이해하기 쉬워 초보자들이 Django를 배우기 시작할 때 흔히 접하는 형태입니다. 또한, render 함수를 사용하여 템플릿과 쉽게 연동할 수 있어 동적인 웹 페이지를 생성하는 데에도 적합합니다. 간단한 페이지부터 데이터를 처리하고 표시하는 복잡한 페이지까지, 함수형 View는 다양한 상황에서 유연하게 사용될 수 있습니다.

### 1.1.2 클래스형 View

클래스형 View는 View를 만드는 또 다른 방법입니다. 함수 대신 클래스를 사용하여 View를 정의합니다. 클래스는 레고 블록처럼 미리 만들어진 기능들을 조립하여 사용할 수 있게 해줍니다.

클래스형 View는 부모 클래스의 기능을 물려받아 코드를 재사용할 수 있고, Django가 제공하는 View 클래스들을 활용해 원하는 기능을 쉽게 추가할 수 있습니다. 이런 이유로 복잡한 웹 페이지를 만들 때 특히 유용합니다. 이렇게 클래스형 View는 코드를 체계적으로 관리하면서도 유연하게 웹 페이지의 기능을 구현할 수 있게 해줍니다. 아래는 클래스형 view의 간단한 예시입니다.

```python
from django.views import View
from django.http import HttpResponse

class HelloWorldView(View):
    def get(self, request):
        return HttpResponse("안녕하세요!")
    
    def post(self, request):
        return HttpResponse("데이터를 받았습니다!")
```
위 예시에서 HelloWorldView 클래스는 GET 요청이 오면 "안녕하세요!"라고 응답하고, POST 요청이 오면 "데이터를 받았습니다!"라고 응답합니다.
처음에는 함수형 View보다 복잡해 보일 수 있지만, 큰 프로젝트를 할 때 코드를 더 체계적으로 관리할 수 있게 해줍니다.

# 2. URL과 View의 연결

Django에서 URL과 View를 연결하는 것은 urls.py 파일에서 이루어집니다. 이 파일에서 URL 패턴과 해당 패턴을 처리할 View를 매핑합니다.

```python
from django.urls import path
from . import views

urlpatterns = [
    path('blog/', blog_list, name='blog_list'),
]
```
이렇게 설정하면 '/blog/' URL로 접근했을 때 blog_list 함수가 실행됩니다.

네, Template에 대한 설명에 상속과 static 파일 관리에 대한 내용을 추가하겠습니다. 다음과 같이 내용을 확장할 수 있습니다:

# 3. Template

Template은 Django에서 웹 페이지를 만들기 위한 '틀'이나 '양식'이라고 생각하면 됩니다. 마치 편지지와 같습니다. 편지지에는 받는 사람, 본문, 보내는 사람 등을 쓸 수 있는 공간이 미리 마련되어 있죠. Django의 Template도 이와 비슷하게 웹 페이지의 기본 구조와 디자인이 미리 준비되어 있고, 실제 내용(사용자 이름, 게시글 등)이 들어갈 자리만 비워둡니다. Django는 이 비워둔 자리에 필요한 정보를 채워 넣어 완성된 웹 페이지를 만듭니다. 이 방식을 사용하면 같은 모양의 페이지를 쉽게 여러 개 만들 수 있고, 전체 디자인을 바꿀 때도 Template만 수정하면 되어 매우 효율적입니다.

## 3.1 Template 상속

템플릿 상속은 Django에서 웹 페이지의 구조를 효율적으로 관리하는 방법입니다. 이는 마치 건물을 지을 때 기본 골조를 먼저 만들고, 각 층마다 필요한 부분을 추가하는 것과 비슷합니다.

웹사이트를 만들다 보면 모든 페이지에 공통으로 들어가는 부분이 있습니다. 예를 들어 헤더, 푸터, 메뉴 등이 그렇죠. 이런 요소들을 페이지마다 반복해서 작성하면 시간도 많이 걸리고, 나중에 수정할 때도 모든 페이지를 하나하나 고쳐야 해서 번거롭습니다.

템플릿 상속을 사용하면 이런 공통 요소를 한 번만 작성하고, 각 페이지에서는 변경되는 부분만 작성하면 됩니다. 이렇게 하면 코드 중복을 줄이고, 전체적인 구조를 일관되게 유지할 수 있으며, 변경 사항을 쉽게 적용할 수 있습니다.

Django에서는 '블록' 개념을 사용해 이를 구현합니다. 기본 템플릿(부모)에서 변경 가능한 부분을 블록으로 지정하고, 각 페이지(자식 템플릿)에서 이 블록의 내용을 채워넣는 방식입니다. 이는 마치 퍼즐의 빈 칸을 채우는 것과 비슷합니다.
## 3.2 Static 파일 관리

Static 파일은 CSS, JavaScript, 이미지처럼 웹 페이지의 모양과 기능을 결정하는 변하지 않는 파일들을 말합니다. Django에서는 이런 static 파일들을 효율적으로 관리할 수 있는 시스템을 제공합니다.

static 파일 관리는 마치 도서관에서 책을 정리하는 것과 비슷합니다. 모든 책(static 파일)을 한 곳에 모아두고, 필요할 때 쉽게 찾아 사용할 수 있게 하는 것이죠.

Django는 개발 중에는 자동으로 static 파일들을 찾아 웹 페이지에 연결해줍니다. 그리고 실제 서비스를 할 때는 'collectstatic' 명령어를 통해 프로젝트의 모든 static 파일을 한 곳에 모을 수 있게 해줍니다. 이렇게 모은 파일들은 웹 서버가 효율적으로 제공할 수 있어 웹사이트의 성능을 높일 수 있습니다.

또한 Django는 static 파일의 URL을 자동으로 생성해주는 기능도 제공합니다. 이를 통해 개발 환경과 실제 서비스 환경에서 파일 경로가 달라지더라도 문제없이 작동하게 할 수 있습니다.

이러한 static 파일 관리 시스템은 개발자가 파일 관리에 들이는 시간을 줄이고, 웹사이트의 성능과 보안을 향상시키는 데 도움을 줍니다.

# 4. render 함수
<!-- 
render 함수는 View에서 Template을 사용하여 HttpResponse 객체를 생성하는 편리한 방법을 제공합니다.

```python
from django.shortcuts import render

def hello_world(request):
    context = {'message': 'Hello, World!'}
    return render(request, 'hello.html', context)
```

render 함수는 다음과 같은 역할을 수행합니다:
1. 지정된 템플릿을 로드합니다.
2. 컨텍스트 데이터를 템플릿에 적용합니다.
3. 렌더링된 HttpResponse 객체를 반환합니다.

이를 통해 개발자는 템플릿 처리 과정을 간소화하고, View 로직에 집중할 수 있습니다.

 -->
::a[Django 공식 문서- render]{class='btn-link' href="https://docs.djangoproject.com/ko/5.0/topics/http/shortcuts/#django.shortcuts.render" target="\_blank"}