---
chapter: URL처리와 템플릿 태그
title: View
date: 2024-07-11
---
# 1. View 함수의 기본 구조

Django에서 view는 웹 요청을 받아 웹 응답을 반환하는 Python 함수입니다. View는 Django 애플리케이션의 로직을 담당하는 핵심 부분으로, 모델(데이터)과 템플릿(표현) 사이를 연결하는 역할을 합니다.

가장 기본적인 view 함수의 구조는 다음과 같습니다.

```python
from django.http import HttpResponse

def my_view(request):
    # 로직 처리
    return HttpResponse("Hello, World!")
```

1. **함수 정의**: View는 일반적으로 Python 함수로 정의됩니다. 함수 이름은 URL 설정에서 참조될 수 있는 적절한 이름을 사용합니다.

2. **request 매개변수**: 모든 view 함수는 첫 번째 인자로 `request` 객체를 받습니다. 이 객체는 현재 HTTP 요청에 대한 모든 정보를 포함합니다.

3. **로직 처리**: View 함수 내에서 필요한 모든 처리를 수행합니다. 데이터베이스 쿼리, 데이터 처리, 폼 검증 등이 여기서 이루어집니다.

4. **응답 반환**: View 함수는 항상 HttpResponse 객체 또는 예외를 반환해야 합니다.

# 2 Render 함수 사용하기

`render` 함수는 Django에서 템플릿을 사용하여 HTML 페이지를 생성할 때 사용하는 편리한 도구입니다. 

## 2.1 Render 함수의 기본 구조

```python
from django.shortcuts import render

def blog_detail(request, post_id):
    # 데이터베이스에서 블로그 포스트 가져오기
    post = get_object_or_404(Post, pk=post_id)
    
    # 컨텍스트 데이터 준비
    context = {
        'post': post,
    }
    
    # 렌더링 및 응답
    return render(request, "main/blog_details.html", context)
```

## 2.2 Render 함수의 동작 방식

1. `render` 함수는 세 가지 주요 인자를 받습니다.
   - `request`: 현재 HTTP 요청 객체
   - 템플릿 파일 경로: 예) "main/blog_details.html"
   - `context`: 템플릿에 전달할 데이터를 담은 딕셔너리

2. Django는 지정된 템플릿 파일을 찾아 읽습니다.

3. 템플릿의 특별한 표시({{ }}나 {% %})를 찾아 `context`의 데이터로 대체합니다.

4. 완성된 HTML을 HttpResponse 객체에 담아 반환합니다.

## 2.3 템플릿 위치와 주의사항

템플릿 파일의 위치는 Django 프로젝트의 구조에 따라 달라질 수 있습니다. 일반적으로 두 가지 방식이 사용됩니다.

1. **앱 내부에 템플릿 위치**
   - 장점: 모듈화에 유리, 앱별로 템플릿 관리 용이
   - 단점: 프로젝트가 커지면 유지보수가 어려울 수 있음

2. **프로젝트 수준의 템플릿 디렉토리**
   - 장점: 전체 프로젝트의 템플릿을 한 곳에서 관리, 유지보수 용이
   - 단점: 앱별 모듈화가 어려울 수 있음

**주의사항**: 
템플릿을 프로젝트 수준에 둘 경우, `render` 함수에서 템플릿 경로를 지정할 때 주의가 필요합니다. 예아래와 같은 코드가 있을 때,

```python
return render(request, "main/blog_details.html", context)
```

여기서 'main/'은 템플릿 디렉토리 내의 하위 폴더를 나타냅니다. 이렇게 폴더명을 명시하는 것이 좋습니다. 그 왜냐하면 여러 앱에서 같은 이름의 템플릿 파일이 있을 경우 Django는 알파벳 순으로 템플릿 디렉토리를 검색하므로, 의도하지 않은 템플릿이 사용될 수 있는 위험을 줄일 수 있습니다.