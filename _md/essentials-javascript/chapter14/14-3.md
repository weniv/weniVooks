---
chapter: 최적화 (Optimization)
title: 메모리 최적화
date: 2024-04-30
---

# 4. 메모리

## 4.1. 메모리의 생명 주기

![스크린샷 2021-12-20 오전 1.33.27.png](/images/essentials-javascript/chapter14/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2021-12-20_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_1.33.27.png)

## 4.2. 메모리 누수와 Garbage Collection

메모리 누수는 프로그램이 필요하지 않은 메모리 공간을 계속해서 점유하는 현상의 의미합니다. 이러한 현상을 방지하기 위해 자바스크립트나 자바, 파이썬 같은 고수준 언어에는 가비지 컬렉터가 존재합니다.

C, C++ 와 같은 저수준의 언어와는 다르게 자바스크립트에서 사용하지 않는 메모리는 자바스크립트 엔진이 추정하여 삭제(Garbage Collection)합니다.

이때 이용하는 방식이 **참조 카운팅** (reference counting)으로 메모리에 존재하는 값을 몇개의 변수와 함수가 참조하고 있는지 살펴보는것 입니다. 참조가 0이 되면 값을 메모리에서 삭제합니다.

예전에는 객체끼리 서로 맞물려있어 제거되지 않던 문제(순환 참조 문제)가 있었지만 최신 브라우저에서는 마크스위프(Mark and Sweep) 알고리즘을 사용하여 이런 문제가 해결되어 있습니다.([https://developer.mozilla.org/ko/docs/Web/JavaScript/Memory_Management#mark-and-sweep_algorithm](https://developer.mozilla.org/ko/docs/Web/JavaScript/Memory_Management#mark-and-sweep_algorithm))

자바스크립트에서 메모리 관리에 신경 써야하는 경우 중 하나는 제때 메모리를 해제해 주지 못하는 경우입니다.

바로 전역변수. 전역변수는 프로그램이 종료되기 전까지 계속 메모리에 존재하게 됩니다.

# 5. 좋은 습관 기르기

좋은 습관을 들인 코드는 많은 에러를 사전에 예방할 수 있도록 만들어 줍니다.

## 5.1. 배열이나 객체를 불변하는 객체처럼 다루기

배열이나 객체는 불변하는 객체처럼 다루는것이 데이터의 변화를 추적하는데 용이합니다.
만약 배열 데이터를 수정해야 한다면, 기존에 사용했던 원본 데이터는 그대로 두고 새로운 배열을 만들어 사용하는 습관을 들이길 바랍니다.

- 실습 : 다음 코드에서 배열의 원소에 💖 이모지를 추가해보세요

```jsx
const aespa = ['카리나', '윈터', '지젤', '닝닝'];
// 결과 : ['카리나💖', '윈터💖', '지젤💖', '닝닝💖']
```

## 5.2. 엄격모드(strict mode)로 사용하기

자바스크립트는 엄격모드로 사용할 것을 권장 드립니다. 많은 에러를 예방할 수 있습니다.

**엄격 모드의 특징**

1. 선언하지 않은 변수에 값을 할당할 수 없습니다.
2. 읽기 전용 객체에 값을 할당하면 에러가 발생합니다. (일반 모드에서는 조용한 에러 —> 무시 처리)
3. 지울수 없는 값을 지우려고 하면 에러가 발생합니다. (일반 모드에서는 조용한 에러 —> 무시 처리)
4. 함수 파라메터에 중복된 이름을 사용할 수 없습니다.

## 5.3. 일치연산자 사용하기

등호 세개를 사용하는 일치 연산자의 사용을 습관화 하세요!

```jsx
1 == 1;
1 == '1';
1 == 2;
'' == false;
[] == false; // 빈 배열은 심지어 truthy 입니다!
null == undefined;
```
