---
chapter: Hook
title: Custom Hook
date: 2024-08-01
---

# 1. Custom Hook

앞서 React에서 제공하는 useState, useEffect 등의 유용한 훅들을 배우고 사용해 보았습니다. 그러나 React에서 기본적으로 제공하는 훅 외에도, 개발 과정에서 반복적으로 사용되는 코드 패턴이 자주 발생합니다. 예를 들어, 데이터를 가져오거나 모달 창을 표시하는 등의 반복적인 로직이 필요할 수 있습니다.

JavaScript에서는 이러한 중복된 로직을 함수로 추출하여 재사용했습니다. React에서는 이 개념을 한 단계 더 발전시켜, 상태 관리와 생명주기 관련 로직을 포함할 수 있는 Custom Hook으로 만들어 분리하고 재사용할 수 있습니다. Custom Hook은 로직의 재사용성을 높이고 컴포넌트의 복잡성을 줄이는 데 매우 유용합니다. 이를 통해 관심사를 분리하고 코드를 더 모듈화할 수 있습니다. 또한, Custom Hook을 사용하면 테스트하기 쉬운 코드를 작성할 수 있으며, 프로젝트 전반에 걸쳐 일관된 패턴을 유지하는 데 도움이 됩니다.

이제 Custom Hook을 만들고 사용하는 방법에 대해 자세히 알아보겠습니다.

## 1.1 Custom Hook 규칙

자신만의 Hook을 만들 때에는 두 가지 명명 규칙을 지켜야 합니다 첫 번째, Hook의 이름은 항상 'use'로 시작해야 합니다. 두 번째, 'use' 뒤에 오는 첫 글자는 대문자여야 합니다.

Hook을 사용하지 않는 함수는 Hook으로 만들 필요가 없습니다. 함수 내에서 useState나 useEffect 등의 훅을 호출하지 않는다면, 그 함수는 Hook으로 간주되지 않으므로 이름 앞에 'use'를 붙이지 않는 것이 좋습니다. 

# 2. Custom Hook 사용 예시

이제 항목, 지출 금액, 잔액을 입력받아 화면에 보여주는 간단한 가계부를 만드는 예시를 살펴보겠습니다.

`App.css`

```css
.app-container {
  max-width: 600px;
  padding: 20px;
}

form {
  margin: 20px 0;
}

label {
  margin-bottom: 10px;
  display: flex;
  flex-direction: column;
}

input {
  margin-top: 5px;
  padding: 5px;
  border: 1px solid #ccc;
  border-radius: 4px;
}

button {
  width: 100%;
  padding: 10px;
  background-color: #4CAF50;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

table {
  width: 100%;
  border-collapse: collapse;
}

th, td {
  border: 1px solid #ddd;
  padding: 8px;
}

th {
  background-color: #f2f2f2;
  font-weight: bold;
}
```

`App.jsx`

```jsx
import React, { useState } from 'react';
import './App.css';

function App() {
    const [item, setItem] = useState('');
    const [amount, setAmount] = useState('');
    const [balance, setBalance] = useState('');
    const [list, setList] = useState([]);

    function handleItemChange(e) {
        setItem(e.target.value);
    }

    function handleAmountChange(e) {
        setAmount(e.target.value);
    }

    function handleBalanceChange(e) {
        setBalance(e.target.value);
    }

    function submit(e) {
        e.preventDefault();
        if (item && amount && balance) {
            setList([...list, { item, amount, balance }]);
            setItem('');
            setAmount('');
            setBalance('');
        }
    }

    return (
        <div className="app-container">
            <h1>가계부</h1>
            <form onSubmit={submit}>
                <label htmlFor="item">
                    항목
                    <input type="text" id="item" value={item} onChange={handleItemChange} />
                </label>
                <label htmlFor="amount">
                    지출 금액
                    <input type="number" id="amount" value={amount} onChange={handleAmountChange} />
                </label>
                <label htmlFor="balance">
                    잔액
                    <input type="number" id="balance" value={balance} onChange={handleBalanceChange} />
                </label>
                <button type="submit">추가</button>
            </form>
            <div>
                <table>
                    <thead>
                    <tr>
                        <th>항목</th>
                        <th>지출 금액</th>
                        <th>잔액</th>
                    </tr>
                    </thead>
                    <tbody>
                    {list.map((list, index) => (
                        <tr key={index}>
                            <td>{list.item}</td>
                            <td>{list.amount}</td>
                            <td>{list.balance}</td>
                        </tr>
                    ))}
                    </tbody>
                </table>
            </div>
        </div>
    )
}

export default App;
```

항목, 지출 금액, 잔액을 입력받아 저장하는 item, amount, balance state를 생성해주었습니다. 입력창에서 입력한 값을 통해 상태 변경을 할 수 있도록 해당하는 입력창의 value, onChange로 연결하였습니다. 3개의 입력창에서 반복되는 로직이 있습니다. state로 값을 저장하고, setState 함수로 값을 변경하는 로직이 반복되고 있습니다. 이 로직을 Custom Hook으로 만들어 재사용해보겠습니다.

`hook/useInput.jsx`

```jsx
import { useState } from 'react'

export default function useInput(initialValue) {
    const [value, setValue] = useState(initialValue);

    function onChange(e) {
        setValue(e.target.value);
    }

    function reset() {
        setValue(initialValue);
    }

    return { value, onChange, reset };
}
```

useInput이라는 훅을 만들었습니다. 이 훅은 초기값을 프롭스로 전달받아 value state를 생성하고 값을 변경하는 onChange 함수와 초기값으로 값을 초기화하는 reset 함수를 가지고 있습니다. 

`App.jsx`

```jsx
import React, { useState } from 'react';
import './App.css';
import useInput from './hook/useInput'

function App() {
    const item = useInput('');
    const amount = useInput('');
    const balance = useInput('');
    const [list, setList] = useState([]);

    function submit(e) {
        e.preventDefault();
        if (item.value && amount.value && balance.value) {
            setList([...list, {
                item: item.value,
                amount: amount.value,
                balance: balance.value
            }]);
        }
    }

    return (
        <div className="app-container">
            <h1>가계부</h1>
            <form onSubmit={submit}>
                <label htmlFor="item">
                    항목
                    <input type="text" id="item" {...item} />
                </label>
                <label htmlFor="amount">
                    지출 금액
                    <input type="number" id="amount" {...amount} />
                </label>
                <label htmlFor="balance">
                    잔액
                    <input type="number" id="balance" {...balance} />
                </label>
                <button type="submit">추가</button>
            </form>
            <div>
                <table>
                    <thead>
                    <tr>
                        <th>항목</th>
                        <th>지출 금액</th>
                        <th>잔액</th>
                    </tr>
                    </thead>
                    <tbody>
                    {list.map((list, index) => (
                        <tr key={index}>
                            <td>{list.item}</td>
                            <td>{list.amount}</td>
                            <td>{list.balance}</td>
                        </tr>
                    ))}
                    </tbody>
                </table>
            </div>
        </div>
    )
}

export default App;
```

\<input {…item} />에서 스프레드 연산자를 사용하였습니다. item 객체의 모든 속성을 input 요소에 전달합니다. 이는 \<input value={item.value} onChange={item.onChange} reset={item.reset} />와 동일합니다. 