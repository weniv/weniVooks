---
chapter: React Router
title: createBrowserRouter, RouterProvider
date: 2024-07-16
---

createBrowserRouter와 RouterProvider는 React Router v6.4에서 도입된 새로운 API입니다. React Router 공식 문서에서는 기존 BrowserRouter 방식보다 이 새로운 방식을 사용하는 것을 권장하고 있습니다. 현재 기존의 BrowserRouter와 새로운 createBrowserRouter, RouterProvider 방식 모두 지원하고 있습니다. 기존 프로젝트에서는 BrowserRouter를 더 자주 보실 수 있겠지만, 이 교재에서는 공식 문서에서 권장하는 새로운 API 중 createBrowserRouter, RouterProvider 대해서도 학습해보도록 하겠습니다.

:::div{.callout}
vite를 이용하여 React 프로젝트를 시작하겠습니다. 터미널에 다음 명령어를 입력하여 리액트 프로젝트를 생성해주세요.

```bash
# npm 7+ 버전 명령어
npm create vite@latest [프로젝트명] -- --template react

# y입력
Ok to proceed? (y) y

# 프로젝트명 입력
Package name: [프로젝트명]

cd [프로젝트명]

npm install

npm run dev
```

:::

# 1. createBrowserRouter

## 1.1 라우터 객체

createBrowserRouter는 라우터 객체를 생성합니다. 

```jsx
const router = createBrowserRouter([
    {
        path: "/",
        element: <div>Hello world!</div>,
    },
    {
        path: "/weniVooks",
        element: <div>Welcome to weniVooks!</div>
    },
]);
```

`path`는 URL 경로를 의미하며, `element`는 해당 경로와 매칭될 때 렌더링할 React 컴포넌트를 지정합니다. `/` 경로로 이동하면 "Hello world!"라는 문구가 화면에 표시되고, `/weniVooks` 경로로 이동하면 "Welcome to weniVooks!"라는 문구가 표시됩니다.

프로젝트를 실행하여 확인해보겠습니다.

`src/main.jsx`

```jsx
import React from 'react';
import ReactDOM from 'react-dom/client';
import {
    createBrowserRouter,
    RouterProvider
} from "react-router-dom";

const router = createBrowserRouter([
    {
        path: "/",
        element: <div>Hello world!</div>,
    },
    {
        path: "/weniVooks",
        element: <div>Welcome to weniVooks!</div>
    },
]);

ReactDOM.createRoot(document.getElementById("root")).render(
    <React.StrictMode>
        <RouterProvider router={router} />
    </React.StrictMode>
);
```

`localhost:5173/` 와 `localhost:5173/weniVooks` 로 접속하면 각각 "Hello World!"와 "Welcome to weniVooks!"라는 문구가 보일 것입니다.

## 1.2 errorElement

라우팅 과정에서 에러가 발생하면 이를 처리하는 새로운 API가 있습니다. 바로 **errorElement**입니다. 라우트 과정에서 렌더링을 하거나 데이터를 가져오지 못하는 등의 에러가 발생하면 기존 element에 지정된 컴포넌트 대신 errorElement에 지정된 컴포넌트가 렌더링됩니다. 전역적인 범위의 errorElement를 설정할 수 있고, 특정 라우터에 대해서도 설정할 수 있습니다. 

`src/routes/error-page.jsx`

```jsx
export default function ErrorPage() {
    return (
        <div id="error-page">
            <h1>Oops!</h1>
            <p>에러가 발생하였습니다!</p>
        </div>
    );
}
```

`src/main.jsx`

```jsx
import React from 'react';
import ReactDOM from 'react-dom/client';
import {
    createBrowserRouter,
    RouterProvider
} from "react-router-dom";
import ErrorPage from "./routes/error-page.jsx";

const router = createBrowserRouter([
    {
        path: "/",
        element: <div>Hello world!</div>,
        errorElement: <ErrorPage />,
    },
    {
        path: "/weniVooks",
        element: <div>Welcome to weniVooks!</div>
    },
]);

ReactDOM.createRoot(document.getElementById("root")).render(
    <React.StrictMode>
        <RouterProvider router={router} />
    </React.StrictMode>
);
```

`localhost:5173/없는경로` 경로로 접속하면, ErrorPage 컴포넌트가 렌더링됩니다. 존재하지 않는 경로로 접속한 경우에도 errorElement에 지정된 컴포넌트가 렌더링됩니다. 라우트 과정에서 발생한 에러의 상세 정보를 얻으려면 `useRouteError` 훅을 사용해보세요. useRouteError 훅은 errorElement 내에서 발생한 에러 객체를 반환하여 에러의 세부 정보를 확인할 수 있습니다. 

 `src/routes/error-page.jsx`

```jsx
import { useRouteError } from "react-router-dom";

export default function ErrorPage() {
    const error = useRouteError();
    console.error(error);

    return (
        <div id="error-page">
		        <h1>Oops!</h1>
            <p>에러가 발생하였습니다!</p>
            <p>
                <i>{error.statusText || error.message}</i>
            </p>
        </div>
    );
}
```

화면과 콘솔창에서 어떤 에러가 발생했는지 확인해봅시다. 

:::div{.beforeAfter}
| 화면 | 콘솔창 |
| ------------------------------------------ | ------------------------------------------ |
| ![화면 속 에러 메세지](/images/basecamp-react/chapter03-5/chapter03-5-1.png) | ![에러 객체 확인](/images/basecamp-react/chapter03-5/chapter03-5-2.png) |
:::

존재하지 않는 경로로 접속했기 때문에 HTTP 404 에러가 발생한 것을 알 수 있습니다.(HTTP 404 에러는 서버가 요청받은 리소스를 찾을 수 없다는 것을 의미합니다.) 에러 객체의 data 필드를 보면 "/react" URL에 대한 라우트가 없다는 것을 확인할 수 있습니다.

## 1.3 중첩라우팅
중첩 라우팅을 설정할 때는 children 속성을 사용합니다.

```jsx
const router = createBrowserRouter([
    {
        path: "/wenivooks",
        element: <WeniVooks />,
        children: [
            {
                path: "basecamp-javascript",
                element: <BasecampJavascript />,
            },
            {
                path: "basecamp-react",
                element: <BasecampReact />,
            },
        ],
    },
]);
```

`/wenivooks/basecamp-javascript` 경로에 접속하면 WeniVooks 컴포넌트와 BasecampJavascript 컴포넌트가 함께 렌더링됩니다. 마찬가지로 `/wenivooks/basecamp-react` 경로에 접속하면 WeniVooks 컴포넌트와 BasecampReact 컴포넌트가 함께 렌더링됩니다. 이때 자식 컴포넌트(BasecampJavascript 또는 BasecampReact)가 WeniVooks 컴포넌트의 어느 위치에 렌더링될지 지정해야 합니다. 이를 위해 `Outlet` 컴포넌트를 사용합니다.

중첩 라우팅의 예시를 살펴보겠습니다.

`src/routes/wenivooks.jsx`

```jsx
import { Outlet } from "react-router-dom";

export default function WeniVooks() {
	return (
		<div>
			<h1>Welcome to WeniVooks!</h1>
			<hr/>
			<Outlet />
		</div>
	)
}
```

`src/routes/basecamp-javascript.jsx`

```jsx
export default function BasecampJavascript() {
	return (
		<div>
			<h2>JavaScript 베이스캠프</h2>
			<ol>
				<li>JavaScript의 기초</li>
				<li>원시타입에 관하여</li>
				<li>함수</li>
				<li>객체 타입에 관하여</li>
			</ol>
		</div>
	)
}
```

`src/routes/basecamp-react.jsx`

```jsx
export default function BasecampReact() {
	return (
		<div>
			<h2>React 베이스캠프</h2>
			<ol>
				<li>React 소개</li>
				<li>React 기초</li>
				<li>React Router</li>
				<li>Hooks</li>
			</ol>
		</div>
	)
}
```

`main.jsx`

```jsx
import React from 'react';
import ReactDOM from 'react-dom/client';
import {
    createBrowserRouter,
    RouterProvider
} from "react-router-dom";
import ErrorPage from "./routes/error-page.jsx";
import WeniVooks from "./routes/wenivooks.jsx";
import BasecampJavascript from "./routes/basecamp-javascript.jsx";
import BasecampReact from "./routes/basecamp-react.jsx";

const router = createBrowserRouter([
    {
        path: "/",
        element: <div>Hello World!</div>,
        errorElement: <ErrorPage/>,
    },
    {
        path: "/weniVooks",
        element: <WeniVooks />,
        children: [
            {
                path: "basecamp-javascript",
                element: <BasecampJavascript />,
            },
            {
                path: "basecamp-react",
                element: <BasecampReact />,
            },
        ],
    },
]);

ReactDOM.createRoot(document.getElementById("root")).render(
    <React.StrictMode>
        <RouterProvider router={router} />
    </React.StrictMode>
);
```

`/wenivooks` 경로에 접속하면 WeniVooks 컴포넌트만 렌더링됩니다. `/wenivooks/basecamp-javascript`에 접속하면 WeniVooks 컴포넌트 내의 `<Outlet />` 위치에 BasecampJavascript 컴포넌트가 렌더링되고, `/wenivooks/basecamp-react`에 접속하면 마찬가지로 `<Outlet />` 위치에 BasecampReact 컴포넌트가 렌더링됩니다.


:::div{.beforeAfter}
| 경로 | 화면 |
| ------------------------------------------ | ------------------------------------------ |
| localhost:5173/wenivooks | ![/wenivooks 경로 화면](/images/basecamp-react/chapter03-5/chapter03-5-3.png) |
| localhost:5173/wenivooks/basecamp-javascript | ![/wenivooks/basecamp-javascript 경로 화면](/images/basecamp-react/chapter03-5/chapter03-5-4.png) 
| localhost:5173/wenivooks/basecamp-react | ![/wenivooks/basecamp-react 경로 화면](/images/basecamp-react/chapter03-5/chapter03-5-5.png) |
:::

중첩 라우팅을 사용하면 웹사이트의 공통된 부분(예를 들어, 이 경우 WeniVooks)은 그대로 유지하면서 특정 부분(Outlet 컴포넌트 내용)만 필요에 따라 바꿀 수 있습니다. 이렇게 하면 코드를 재사용하기 쉽고 잘 정리할 수 있어 편리합니다.

# 2. RouterProvider


:::div{.box}

이외에도 추가된 다양한 API가 있습니다. 더 알고 싶다면 아래에 공식 문서 링크를 남겼으니 참고해주세요.

[React Router Data Api](https://reactrouter.com/en/main/routers/picking-a-router)

:::