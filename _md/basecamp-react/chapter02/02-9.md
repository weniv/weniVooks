---
chapter: React
title: 쇼핑몰 페이지 구현
date: 2024-08-01
---

::img{width="700" alt="Shopping Mall" src="/images/basecamp-react/chapter02-9/chapter02-9-1.png"}

이 섹션에서는 지금까지 학습한 내용을 바탕으로 React를 사용해서 `기본적인 쇼핑몰 페이지`를 구현해보는 연습을 해보겠습니다.

:::div{.callout}
아래의 링크를 통해 실습에 필요한 피그마 자료를 보실 수 있으며,
참고할 코드가 필요하시다면 zip파일을 다운로드 받아 주세요.

::a[파이널코딩테스트_API(공개용)]{class='btn-link' href="https://www.figma.com/file/KdWIgQ5VBQYPPlMB2ER6TX/%ED%8C%8C%EC%9D%B4%EB%84%90%EC%BD%94%EB%94%A9%ED%85%8C%EC%8A%A4%ED%8A%B8_API(%EA%B3%B5%EA%B0%9C%EC%9A%A9)?node-id=0%3A1" target="\_blank"}

[src.zip](/images/basecamp-react/chapter02-9/src.zip)

:::

# 1. 기본 쇼핑몰 페이지 구현

:::div{.callout}

```shell
# 아래 웹주소를 입력하여 페이지 확인을 하실 수 있습니다.
http://test.api.weniv.co.kr/mall
http://test.api.weniv.co.kr/asset/img/1/thumbnailImg.jpg
```

:::

## 1.1. 프로젝트 설정

먼저, 필요한 라이브러리와 스타일시트를 HTML 파일에 포함시킵니다.

```html
<!DOCTYPE html>
<html lang="ko">
  <head>
    <title>쇼핑몰 웹 페이지</title>
    <link
      href="//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSansNeo.css"
      rel="stylesheet"
      type="text/css"
    />
    <link rel="stylesheet" href="src/style/style.css" />
  </head>
  <body>
    <div id="root"></div>
    <script
      src="https://unpkg.com/react@17/umd/react.development.js"
      crossorigin
    ></script>
    <script
      src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"
      crossorigin
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js"
      crossorigin
    ></script>
    <script type="text/babel">
      // React 코드가 여기에 들어갑니다.
    </script>
  </body>
</html>
```

## 1.2. 데이터 구조

제품이 하나의 `오브젝트` 형태들로 들어가야 합니다.

:::div{.callout}
게시물 Data 구조는 다음 링크에서 확인하실 수 있습니다.

::a[게시물 Data]{class='btn-link' href="http://35.76.53.28:8080/mall" target="\_blank"}

:::

1. `게시물 Data Schema`

```javascript
const data = [
  {
    // 고유, 게시물번호로 사용
    id: 5,
    productName: 'Hack Your Life 개발자 노트북 파우치',
    price: 36000,
    stockCount: 230,
    thumbnailImg: 'asset/img/5/thumbnailImg.jpg',
    // 상품별 옵션
    option: [
      {
        // 각 상품별 옵션 id
        id: 1,
        optionName: '13인치',
        // 옵션별 추가금
        additionalFee: 0,
      },
      {
        id: 2,
        optionName: '15인치',
        additionalFee: 1000,
      },
    ],
    discountRate: 19,
    shippingFee: 1500,
    // 이미지 주소 배열형태로 제공
    detailInfoImage: [
      'asset/detail/5/detail1.png',
      'asset/detail/5/detail2.png',
    ],
    viewCount: 0,
    pubDate: '2024-07-26',
    modDate: '2024-07-26',
  },
  // ... 더 많은 상품 데이터
];
```

2. `쿠폰 Data Schema`

:::div{.callout}
쿠폰 Data 구조는 다음 링크에서 확인하실 수 있습니다.
::a[쿠폰 Data]{class='btn-link' href=" http://35.76.53.28:8080/coupon" target="\_blank"}

:::

```json
{
  // 고유, 게시물번호로 사용
  "id": 1,
  "productid": 7,
  "couponName": "제주코딩베이스캠프 코딩 연습장 세트 2,000원 할인 쿠폰",
  "discount": 2000,
  "discountRate": 0,
  //쿠폰 재고
  "stockCount": 100,
  "pubDate": "2024-07-26",
  "modDate": "2024-07-26"
},
// ... 더 많은 상품 데이터
```

## 1.3. 컴포넌트 구현

1. `Main 컴포넌트`

페이지의 제목을 표시합니다.

```jsx
const Main = () => {
  return <h1 className="ir">상품목록 페이지</h1>;
};
```

2. `Card 컴포넌트`

```jsx
const Card = ({ goods }) => {
  const url = 'http://test.api.weniv.co.kr/' + goods.thumbnailImg;
  return (
    <li className="product-item">
      <div className="product-img">
        <img src={url} alt={goods.productName} />
      </div>
      <strong className="product-name sl-ellipsis">{goods.productName}</strong>
      <button className="like-btn"></button>
      <div className="product-price">
        <strong className="price m-price">
          {goods.price}
          <span>원</span>
        </strong>
      </div>
    </li>
  );
};
```

3. `Product 컴포넌트`

상품 목록을 표시합니다.

```jsx
const Product = ({ item }) => {
  return (
    <main className="product">
      <ul className="product-list">
        {item.map((goods) => (
          <Card key={goods.id} goods={goods} />
        ))}
      </ul>
      <Cart />
    </main>
  );
};
```

4. `전체 구조`

```jsx
const body = (
  <div>
    <Main />
    <Product item={data} />
  </div>
);

ReactDOM.render(body, document.querySelector('#root'));
```

# 2. 고도화 작업

기본 구현을 마친 후, 다음과 같은 추가 기능을 구현하여 쇼핑몰 페이지를 고도화할 수 있습니다.

## 2.1. 상세 페이지 (모달)

상품 클릭 시 모달 형태로 상세 정보를 표시합니다.

```jsx
const ProductDetail = ({ product, onClose }) => {
  return (
    <div className="modal">
      <h2>{product.productName}</h2>
      <img
        src={`http://test.api.weniv.co.kr/${product.thumbnailImg}`}
        alt={product.productName}
      />
      <p>가격: {product.price}원</p>
      <p>재고: {product.stockCount}</p>
      <button onClick={onClose}>닫기</button>
    </div>
  );
};
```

## 2.2. 장바구니 기능

장바구니에 상품을 추가하고 관리하는 기능을 구현합니다.

```jsx
const Cart = ({ items, onRemove }) => {
  const total = items.reduce((sum, item) => sum + item.price, 0);
  return (
    <div className="cart">
      <h2>장바구니</h2>
      <ul>
        {items.map((item) => (
          <li key={item.id}>
            {item.productName} - {item.price}원
            <button onClick={() => onRemove(item.id)}>제거</button>
          </li>
        ))}
      </ul>
      <p>총 금액: {total}원</p>
    </div>
  );
};
```

## 2.3. 좋아요 기능

```jsx
const LikeButton = ({ productId }) => {
  const [isLiked, setIsLiked] = useState(false);

  useEffect(() => {
    const likedItems = JSON.parse(localStorage.getItem('likedItems')) || [];
    setIsLiked(likedItems.includes(productId));
  }, [productId]);

  const toggleLike = () => {
    const likedItems = JSON.parse(localStorage.getItem('likedItems')) || [];
    if (isLiked) {
      localStorage.setItem(
        'likedItems',
        JSON.stringify(likedItems.filter((id) => id !== productId)),
      );
    } else {
      localStorage.setItem(
        'likedItems',
        JSON.stringify([...likedItems, productId]),
      );
    }
    setIsLiked(!isLiked);
  };

  return <button onClick={toggleLike}>{isLiked ? '♥' : '♡'}</button>;
};
```

## 2.4. API 연동

실제 서버와의 통신을 위해 API 연동을 구현합니다. 여기서는 GET 요청만 실제로 데이터를 가져오고, 다른 요청은 성공 메시지만 반환하도록 합니다.

```jsx
const fetchProducts = async () => {
  const response = await fetch('http://35.76.53.28:8080/mall');
  const data = await response.json();
  return data;
};

const createProduct = async (productData) => {
  const response = await fetch('http://35.76.53.28:8080/mall', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(productData),
  });
  return { success: true };
};
```

1. `POST(생성)`
   서버에 새로운 데이터를 생성할 것을 요청하는 역할을 합니다.

2. `PUT(수정)`
   기존의 데이터를 전부 업데이트하는 역할을 합니다.

3.

## 2.5. 쿠폰 기능

쿠폰을 적용하여 할인된 가격을 계산하는 기능을 구현합니다.

```jsx
const applyCoupon = (price, coupon) => {
  if (coupon.discountRate) {
    return price * (1 - coupon.discountRate / 100);
  } else if (coupon.discount) {
    return Math.max(price - coupon.discount, 0);
  }
  return price;
};
```

## 2.6. 오류 처리

존재하지 않는 상품에 대한 처리를 구현합니다.

```jsx
const ProductPage = ({ id }) => {
  const [product, setProduct] = useState(null);
  const [error, setError] = useState(null);

  useEffect(() => {
    fetchProduct(id)
      .then(setProduct)
      .catch(() => setError('상품을 찾을 수 없습니다.'));
  }, [id]);

  if (error) {
    return (
      <div>
        {error} <a href="/">메인으로 돌아가기</a>
      </div>
    );
  }

  if (!product) {
    return <div>로딩 중...</div>;
  }

  return <ProductDetail product={product} />;
};
```

## 2.7. 라우팅 구현

React Router를 사용하여 페이지 간 이동을 구현합니다.

```jsx
import { BrowserRouter as Router, Route, Switch } from 'react-router-dom';

function App() {
  return (
    <Router>
      <Switch>
        <Route exact path="/" component={ProductList} />
        <Route path="/product/:id" component={ProductPage} />
        <Route path="/cart" component={CartPage} />
      </Switch>
    </Router>
  );
}
```

## 2.8. 스타일 적용

styled-components를 사용하여 동적 스타일링을 적용합니다.

```jsx
import styled from 'styled-components';

const Button = styled.button`
  background-color: ${(props) => (props.primary ? 'blue' : 'white')};
  color: ${(props) => (props.primary ? 'white' : 'blue')};
  padding: 10px 15px;
  border: 2px solid blue;
  border-radius: 4px;
`;

function MyComponent() {
  return (
    <div>
      <Button>일반 버튼</Button>
      <Button primary>주요 버튼</Button>
    </div>
  );
}
```

결과적으로, 구현이 완료된 쇼핑몰 페이지는 다음 사진과 같습니다.

::img{width="600" alt="Shopping Mall WebPage" src="/images/basecamp-react/chapter02-9/chapter02-9-2.png"}

이러한 고도화 작업을 통해 기본적인 쇼핑몰 페이지에서 더 발전된 기능과 사용자 경험을 제공할 수 있습니다. 실제 프로젝트에서는 이외에도 성능 최적화, 단위 테스트, 웹 접근성 개선 등 다양한 측면을 고려해야 합니다.

# 3. 부록

웹 페이지에 댓글 기능 챗봇 기능을 추가하여 매력적인 요소를 더할 수 있습니다. 우선 아래 두 가지 사이트의 가입을 하신 다음, 다음 단계를 따라와 주세요!

## 3.1 Disqus

::img{width="300" alt="Disqus Logo" src="/images/basecamp-react/chapter02-9/chapter02-9-4.png"}

Disqus는 웹페이지 개발 시, 무료로 멘션 기능을 추가할 수 있는 사이트입니다.

## 3.2 Tawk

::img{width="300" alt="Tawk Logo" src="/images/basecamp-react/chapter02-9/chapter02-9-5.png"}

Tawk는 웹페이지 개발 시, 무료로 챗봇 기능을 추가할 수 있는 사이트입니다.
