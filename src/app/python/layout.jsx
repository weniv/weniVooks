import classNames from 'classnames';

import styles from './layout.module.scss';

import Header from '@/components/layouts/Header';
import Side from '@/components/layouts/Side';
import Page from '@/components/layouts/Page';
import BtnTop from '@/components/feature/BtnTop';

export const metadata = {
  title: '파이썬 | 위니북스',
  description: 'Generated by create next app',
};

const BeforeSideMenu = () => {
  const savedOpen = localStorage.getItem('menu');

  if (savedOpen === 'close') {
    document.querySelector('.layout-side').classList.add('side-close');
  } else if (savedOpen === 'open') {
    document.querySelector('.layout-side').classList.add('side-open');
  }
};

export default function Layout({ children }) {
  const pythonMenu = require('public/data/pythonMenu.json');

  return (
    <>
      <Header />

      <div className={classNames('layout-grow', styles.wrapper)}>
        <Side data={pythonMenu} />
        <div className={styles.content} style={{ height: '300vh' }}>
          {children}
        </div>
      </div>
      <Page />
      <BtnTop />
      <script
        dangerouslySetInnerHTML={{
          __html: `(${String(BeforeSideMenu)})()`,
        }}
      ></script>
    </>
  );
}
